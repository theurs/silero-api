# Silero TTS FastAPI Service

–≠—Ç–æ –≥–æ—Ç–æ–≤—ã–π –∫ —Ä–∞–±–æ—Ç–µ, –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π FastAPI-—Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–∏–Ω—Ç–µ–∑–∞ —Ä—É—Å—Å–∫–æ–π —Ä–µ—á–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥–µ–ª–µ–π [Silero Models](https://github.com/snakers4/silero-models).

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫–∞–∫ –æ–±—ã—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞, —Ç–∞–∫ –∏ —Ç–µ–∫—Å—Ç–∞ —Å SSML-—Ä–∞–∑–º–µ—Ç–∫–æ–π –≤ –∞—É–¥–∏–æ—Ñ–æ—Ä–º–∞—Ç Ogg Opus. –û–Ω —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω —Å —É—á–µ—Ç–æ–º —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –≤–∫–ª—é—á–∞—è –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤, –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

-   **–î–≤–∞ —Ä–µ–∂–∏–º–∞ —Å–∏–Ω—Ç–µ–∑–∞**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (`/tts/text`) –∏ —Ç–µ–∫—Å—Ç–∞ —Å SSML-—Ä–∞–∑–º–µ—Ç–∫–æ–π (`/tts/ssml`).
-   **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏ "—É–º–Ω–∞—è" –Ω–∞—Ä–µ–∑–∫–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º NLP-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `razdel` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–∞—É–∑.
-   **–û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞**: –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –ø–µ—Ä–µ–¥ —Å–∏–Ω—Ç–µ–∑–æ–º –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏.
-   **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞—É–¥–∏–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `.ogg` —Å –∫–æ–¥–µ–∫–æ–º Opus (24 –∫–±–∏—Ç/—Å), —á—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –±–æ—Ç–æ–≤.
-   **–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `threading.Lock` –¥–ª—è –∑–∞—â–∏—Ç—ã –º–æ–¥–µ–ª–∏ –æ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞, –æ—Ä–≥–∞–Ω–∏–∑—É—è –æ—á–µ—Ä–µ–¥—å –∑–∞–ø—Ä–æ—Å–æ–≤.
-   **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ü–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ FastAPI –∏ Uvicorn, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.
-   **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –ª–æ–≥–∏, –≤–∫–ª—é—á–∞—è –ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞ Uvicorn, –ø–∏—à—É—Ç—Å—è –≤ —Ä–æ—Ç–∏—Ä—É–µ–º—ã–π —Ñ–∞–π–ª `app.log`.
-   **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger UI –∏ ReDoc) –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å–∞–º `/docs` –∏ `/redoc`.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

-   **–í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫**: FastAPI
-   **ASGI-—Å–µ—Ä–≤–µ—Ä**: Uvicorn
-   **–°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏**: Silero Models v5 (PyTorch)
-   **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞**: Razdel
-   **–ê—É–¥–∏–æ-–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è**: FFmpeg
-   **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: NumPy, SciPy

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

1.  **Python 3.10+**
2.  **FFmpeg**: –≠—Ç–æ **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞—è** –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å. `ffmpeg` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `PATH`.
    -   **–î–ª—è Windows**: –°–∫–∞—á–∞–π—Ç–µ —Å [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞](https://ffmpeg.org/download.html) –∏ –¥–æ–±–∞–≤—å—Ç–µ –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ `bin` –≤ `PATH`.
    -   **–î–ª—è macOS (—á–µ—Ä–µ–∑ Homebrew)**: `brew install ffmpeg`
    -   **–î–ª—è Debian/Ubuntu**: `sudo apt update && sudo apt install ffmpeg`

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone https://your-repository-url/silero-tts-api.git
    cd silero-tts-api
    ```

2.  **–°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
    ```bash
    # –°–æ–∑–¥–∞–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ
    python -m venv .venv

    # –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –µ–≥–æ
    # Windows
    .venv\Scripts\activate
    # macOS / Linux
    source .venv/bin/activate
    ```

3.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
    ```bash
    uvicorn app.main:app --host 0.0.0.0 --port 8000 --log-config log_config.yaml
    ```    -   –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –º–æ–¥–µ–ª—å Silero –±—É–¥–µ—Ç —Å–∫–∞—á–∞–Ω–∞ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è `torch.hub`. –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.
    -   –°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8000`.

## ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API —É–¥–æ–±–Ω–µ–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Swagger UI.

**–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:** `http://localhost:8000/docs`

### –≠–Ω–¥–ø–æ–∏–Ω—Ç: `/tts/text`

–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç –≤ —Ä–µ—á—å. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã.

-   **–ú–µ—Ç–æ–¥**: `POST`
-   **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞** (`application/json`):
    ```json
    {
      "text": "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä! –≠—Ç–æ—Ç —Ç–µ–∫—Å—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–º, –∏ —Å–µ—Ä–≤–∏—Å —Å–∞–º –Ω–∞—Ä–µ–∂–µ—Ç –µ–≥–æ –Ω–∞ –∫—É—Å–æ—á–∫–∏.",
      "speaker": "xenia",
      "put_accent": true,
      "put_yo": true
    }
    ```
-   **–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç**:
    -   `HTTP 200 OK`
    -   –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞: –ê—É–¥–∏–æ—Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ `audio/ogg`.
-   **–ü—Ä–∏–º–µ—Ä —Å `curl`:**
    ```bash
    curl -X POST "http://localhost:8000/tts/text" \
    -H "Content-Type: application/json" \
    -d '{"text": "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏."}' \
    --output speech.ogg
    ```

### –≠–Ω–¥–ø–æ–∏–Ω—Ç: `/tts/ssml`

–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–µ–∫—Å—Ç —Å SSML-—Ä–∞–∑–º–µ—Ç–∫–æ–π –≤ —Ä–µ—á—å. –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞—Ä–µ–∑–∫—É.

-   **–ú–µ—Ç–æ–¥**: `POST`
-   **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞** (`application/json`):
    ```json
    {
      "ssml_text": "<speak>–ü—Ä–∏–≤–µ—Ç, <break time='500ms'/> –º–∏—Ä! –Ø –≥–æ–≤–æ—Ä—é —Å –ø–∞—É–∑–æ–π.</speak>",
      "speaker": "xenia"
    }
    ```
-   **–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç**:
    -   `HTTP 200 OK`
    -   –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞: –ê—É–¥–∏–æ—Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ `audio/ogg`.
-   **–ü—Ä–∏–º–µ—Ä —Å `curl`:**
    ```bash
    curl -X POST "http://localhost:8000/tts/ssml" \
    -H "Content-Type: application/json" \
    -d '{"ssml_text": "<speak>–¢–µ—Å—Ç <prosody pitch=\"high\">–°–°–ú–õ</prosody> —Ä–∞–∑–º–µ—Ç–∫–∏.</speak>"}' \
    --output speech_ssml.ogg
    ```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
silero-tts-api/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª: FastAPI, —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ tts_model.py         # –ú–æ–¥—É–ª—å-–æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é Silero
‚îÇ   ‚îî‚îÄ‚îÄ text_processor.py    # –ú–æ–¥—É–ª—å –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∏ –Ω–∞—Ä–µ–∑–∫–∏ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ .venv/                   # –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ app.log                  # –§–∞–π–ª –¥–ª—è –ª–æ–≥–æ–≤ (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞)
‚îú‚îÄ‚îÄ log_config.yaml          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è Uvicorn
‚îú‚îÄ‚îÄ requirements.txt         # –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Python
‚îú‚îÄ‚îÄ test_model.py            # –ú–∏–∫—Ä–æ-—Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏
‚îî‚îÄ‚îÄ README.md                # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–±–æ—Ç–µ —Å–µ—Ä–≤–∏—Å–∞, –≤–∫–ª—é—á–∞—è HTTP-–∑–∞–ø—Ä–æ—Å—ã (`uvicorn.access`) –∏ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`app.*`), –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª `app.log`. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `log_config.yaml`. –§–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–æ—Ç–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ 5MB.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1.  **–ó–∞–ø—É—Å–∫**: –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ `uvicorn` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `log_config.yaml` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è. –ú–µ–Ω–µ–¥–∂–µ—Ä `lifespan` –≤ `main.py` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –º–æ–¥–µ–ª—å Silero –≤ –ø–∞–º—è—Ç—å –æ–¥–∏–Ω —Ä–∞–∑.
2.  **–ó–∞–ø—Ä–æ—Å –Ω–∞ `/tts/text`**:
    -   –≠–Ω–¥–ø–æ–∏–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç.
    -   –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `TextChunker` –∏–∑ `text_processor.py`, –∫–æ—Ç–æ—Ä—ã–π –æ—á–∏—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –æ—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏ –Ω–∞—Ä–µ–∑–∞–µ—Ç –µ–≥–æ –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –¥–ª—è –º–æ–¥–µ–ª–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—è `razdel`.
    -   `main.py` –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç —Ü–∏–∫–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º –∫–∞–∂–¥—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –ø–æ –æ—á–µ—Ä–µ–¥–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ `tts_model.py`. –î–æ—Å—Ç—É–ø –∫ –º–æ–¥–µ–ª–∏ –∑–∞—â–∏—â–µ–Ω `threading.Lock`.
    -   –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –∞—É–¥–∏–æ-—Ç–µ–Ω–∑–æ—Ä—ã –æ—Ç –∫–∞–∂–¥–æ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ —Å–∫–ª–µ–∏–≤–∞—é—Ç—Å—è –≤ –æ–¥–∏–Ω –±–æ–ª—å—à–æ–π —Ç–µ–Ω–∑–æ—Ä `torch.cat()`.
    -   –§–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–Ω–∑–æ—Ä –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏—é `convert_to_ogg_opus`, –∫–æ—Ç–æ—Ä–∞—è —Å –ø–æ–º–æ—â—å—é `ffmpeg` –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∞—É–¥–∏–æ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª.
    -   –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `FileResponse`, –∫–æ—Ç–æ—Ä–æ–º—É –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è `BackgroundTask` –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ **–ø–æ—Å–ª–µ** –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç—É.
3.  **–ó–∞–ø—Ä–æ—Å –Ω–∞ `/tts/ssml`**: –†–∞–±–æ—Ç–∞–µ—Ç –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –Ω–æ –±–µ–∑ —ç—Ç–∞–ø–∞ –Ω–∞—Ä–µ–∑–∫–∏ —Ç–µ–∫—Å—Ç–∞.

## üîÆ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

-   **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å `Dockerfile` –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è.
-   **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à (–Ω–∞–ø—Ä–∏–º–µ—Ä, Redis) –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å–∏–Ω—Ç–µ–∑–∞ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤.
-   **–í—ã–±–æ—Ä –≥–æ–ª–æ—Å–∞**: –°–¥–µ–ª–∞—Ç—å –≤—ã–±–æ—Ä –≥–æ–ª–æ—Å–∞ (`speaker`) –∏ –º–æ–¥–µ–ª–∏ –±–æ–ª–µ–µ –≥–∏–±–∫–∏–º, –ø–µ—Ä–µ–¥–∞–≤–∞—è –∏—Ö –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞.
-   **Health Check**: –î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç `/health` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞.